# 検索

ドキュメント内の検索を可能にする。
できるだけ軽量、かつコードが多くなりすぎないようシンプルに実装すること。

## できていること

* input要素、書き込みに伴う検索実行とドキュメント内prop(searchResult)の更新
* ドキュメント内のcontentの横断検索(ロジックは正確には未確認。現在FoundSpanのスタート位置としているlastIndexが一致範囲の始まりではない可能性大。その他、範囲がその位置を内包しているかどうかがまだ未検証)

## できていないこと

* EditorTextAreaへのマーク流し込み: 現状、ドキュメント自体の更新を外部からオーバーレイ部分に通知できない。またオーバーレイ要素の実装自体があまりエレガントでない(spanを直接流しているため、space(" ")の順番が一番最初に来るなど制限が非常に多い)こともあり、踏み込めていない。今後の事も考えると、brやspaceも含めたこの要素解析とspan流し込み処理は別クラス(features/markup/SpanMarkup.ts)などに移し、もっと柔軟な方法(br/spaceなどをそれぞれ個別にON/OFFできるなど)する方が良い。
* 実際の動作検証(上述のタスクが終わって初めてできる)
* パフォーマンス検討(検索のタイミング、現状の構造自体の妥当性の検証)